#include <cstdlib>
#include <iostream>
#include <vector>

using namespace std;

// Wszelkie dane pojazdu i dostęp do operacji z nim związanych przechowywane są w klasie "Pojazd"
class Pojazd {
	// Dane pojazdu
	string typ, marka, model, silnik;
    int vin;
	 
	public:     
    // Konstruktor parametrowy dla zmiennych obowiązkowych  
	Pojazd(string typ, string marka, string model, string silnik, int vin) {
    	this->typ = typ;
        this->marka = marka;
        this->model = model;
        this->silnik = silnik;
        this->vin = vin;
    }
    
	// Konstruktor bezparametrowy  
	Pojazd() {
    	Pojazd("Nieznany","Nieznana","Nieznany","Nieznany",0);
    }    
	
	// Zwracanie i ustawianie wartości zmiennej "Typ"
	string oddajTyp() {
		return typ;	
	}
	
	void ustawTyp(string typ) {
		this->typ = typ;	
	}
	
	// Zwracanie i ustawianie wartości zmiennej "Marka"
	string oddajMarka() {
		return marka;	
	}
	
	void ustawMarka(string marka) {
		this->marka = marka;	
	}
	
	// Zwracanie i ustawianie wartości zmiennej "Model"
	string oddajModel() {
		return model;	
	}
	
	void ustawModel(string model) {
		this->model = model;	
	}  
	
	// Zwracanie i ustawianie wartości zmiennej "Silnik"
	string oddajSilnik() {
		return silnik;	
	}
	
	void ustawSilnik(string silnik) {
		this->silnik = silnik;	
	}
	
	// Zwracanie i ustawianie wartości zmiennej "VIN"
	int oddajVin() {
		return vin;	
	}
	
	void ustawVIN(int vin) {
		this->vin = vin;	
	}     
};

// Definicja wektora obiektow Pojazd
vector <Pojazd> tablicaPojazdow;

// Metoda dodajaca dane pojazdu dla odpowiedniego indeksu wektora
// (jeżeli dla danego indeksu istnieje już obiekt to następuje inkrementacja indeksu tego obiektu i każdego następnego i dopiero dodanie naszego obiektu)	
string dodajPojazd(unsigned int id) {
	
	string typ,marka,model,silnik;
	int vin;

	cout << "Podaj typ pojazdu: ";
	cin >> typ;
	cout << "Podaj marke pojazdu: ";
	cin >> marka;
	cout << "Podaj model pojazdu: ";
	cin >> model;
	cout << "Podaj typ silnika: ";
	cin >> silnik;
	cout << "Podaj identyfikator VIN pojazdu: ";
	cin >> vin;
	
	tablicaPojazdow.insert (tablicaPojazdow.begin() + id,Pojazd(typ,marka,model,silnik,vin));
	return "Operacja wykonana pomyślnie!";
}

// Metoda dodajaca dane pojazdu na koniec wektora
string dodajPojazd() {
	return dodajPojazd(tablicaPojazdow.size());
}

// Metoda wyswietlajaca dane pojazdu o danym ID	
string wyswietlDanePojazdu(unsigned int id) {
	if (id >=tablicaPojazdow.size()) {
		cout << "Błąd x11" << endl;
		cout << endl;
		return "x11";
	} else {
		cout << "Typ: " << tablicaPojazdow[id].oddajTyp() << endl;
       	cout << "Marka: " << tablicaPojazdow[id].oddajMarka() << endl;
      	cout << "Model: " << tablicaPojazdow[id].oddajModel() << endl;
        cout << "Typ silnika: " << tablicaPojazdow[id].oddajSilnik() << endl;
        cout << "Nr. VIN: " << tablicaPojazdow[id].oddajVin() << endl;
        cout << endl;
        return "x10";	
	}
}

// Metoda filtrująca dane pojazdu
string filtrujDanePojazdu(string atrybut, string wartosc) {
	unsigned int znalezionoWyniki = 0;
	
	// Przeszukiwanie wszystkich obiektów
	for (int i=0; i<tablicaPojazdow.size();i++) {
		if (atrybut == "Typ" || "typ" || "TYP") {
			if (tablicaPojazdow[i].oddajTyp()==wartosc) {
				wyswietlDanePojazdu(i);
				znalezionoWyniki = 1;	
			}
		} else if (atrybut == "Marka" || "marka" || "MARKA") {
			if (tablicaPojazdow[i].oddajMarka()==wartosc) {
				wyswietlDanePojazdu(i);
				znalezionoWyniki = 1;	
			}
		} else if (atrybut == "Model" || "model" || "MODEL") {
			if (tablicaPojazdow[i].oddajModel()==wartosc) {
				wyswietlDanePojazdu(i);
				znalezionoWyniki = 1;	
			}
		} else if (atrybut == "Typ silnika" || "typ silnik" || "TYP SILNIKA" || "Silnik" || "silnik" || "SILNIK") {
			if (tablicaPojazdow[i].oddajSilnik()==wartosc) {
				wyswietlDanePojazdu(i);
				znalezionoWyniki = 1;	
			}
		// Filtrowanie po VIN nie działa z powodu niedziałającego parsowania zmiennej "wartosc"
		} else if (atrybut == "Nr.Vin" || "nr.vin" || "NR.VIN" || "Vin" || "vin" || "VIN" || "NrVin" || "nrvin" || "NRVIN" || "Numer Vin" || "numer vin" || "NUMER VIN" || "Numer VIN") {
			if (tablicaPojazdow[i].oddajVin()==atoi(wartosc.c_str())) {
				wyswietlDanePojazdu(i);
				znalezionoWyniki = 1;	
			}
		// Obsługa błędu - nieistnieje taki atrybut
		} else {
				cout << "Taki atrybut został nieznaleziony." << endl;
				cout << "Sprawdź pisownie i spróbuj ponownie." << endl;
				cout << endl;
				return "x21";
		}
		cout << endl;
	}
	
	// Obsługa błędu - nieistnieją obiekty o takich atrybutach
	if (znalezionoWyniki == 0) {
		cout << "Nieznaleziono elementów odpowiadających podanym kryteriom." << endl;
		return "x22";	
	}
				
	return "x20";
}

int main(int argc, char *argv[]) {

    return EXIT_SUCCESS;
}
